var module={};function round_to_two_decimal_places(a){new_num=Math.round(a*100)/100;return new_num}var tip=d3.tip().attr("class","d3-tip");var tooltip=d3.tip().attr("class","d3-tip").offset([0,+110]).html(function(a){temp="Probe: "+a.Probe+"<br/>Line Group: "+a.LineGraphGroup+"<br/>Day: "+a.Day+"<br/>Sample ID: "+a.Replicate_ID+"<br/>";return temp});function run_line_gene_expression_graph(t,d,h,e,f,k,b,n,c,l){var o=h.split(",").length;var r=new Array();h=remove_spaces(h);var m=h.split(",");if(m[0]=="Sample_Type"||m[1]=="Sample_Type"){first_option="Sample_Type"}else{first_option=m[0]}day_state_order=Object.keys(n.lineGraphOrdering).sort(function(v,u){return n.lineGraphOrdering[v]-n.lineGraphOrdering[u]});if(day_state_order!="none"){data.sort(function(v,u){return day_state_order.indexOf(v.Day)-day_state_order.indexOf(u.Day)})}else{data.sort(function(v,u){return v.Day.localeCompare(u.Day)})}if((unique_probes.length*day_state_order.length)>20){show_days="no"}else{show_days="yes"}max=0;min=0;number_of_increments=0;count=0;probes_types=new Array();probes=new Array();probe_count=0;sample_count=0;line_groups=new Array();line_group_array=new Array();line_group_colour_array={};count=0;line_group_count=0;j=0;number_of_colours=39;colour_count=0;days=[];sample_id_list=[];sample_type_hover={};day_names="";day_count=0;first_option="LineGraphGroup";data.forEach(function(u){u.Expression_Value=+u.Expression_Value;u.Standard_Deviation=+u.Standard_Deviation;u.Probe=u.Probe;if(u.Expression_Value+u.Standard_Deviation>max){max=u.Expression_Value+u.Standard_Deviation}if(u.Expression_Value-u.Standard_Deviation<min){min=u.Expression_Value-u.Standard_Deviation}if($.inArray(u.Probe,probes_types)==-1){probes_types.push(u.Probe);probe_count++}if($.inArray(u.Replicate_ID,sample_id_list)==-1){sample_id_list.push(u.Replicate_ID);sample_count++}if($.inArray(u.Day,days)==-1){day_count++;days.push(u.Day);sample_type_hover[u.Day]=u.Day}if($.inArray(u[first_option],r)==-1){r.push(u[first_option])}if($.inArray(u.LineGraphGroup,line_group_array)==-1){line_group_array.push(u.LineGraphGroup);line_groups[u.LineGraphGroup]=line_group_count;sample_type_hover[u.LineGraphGroup]=u.LineGraphGroup;j++;line_group_count++}count++});var g={};g=t;setup_colours_for_group(r.sort(),g,number_of_colours,t);for(day in days){day_names=days[day]+" "+day_names}number_of_increments=max-min;if(number_of_increments<n.medianDatasetExpression){number_of_increments=Math.ceil(n.medianDatasetExpression)}else{if(number_of_increments<n.detectionThreshold){number_of_increments=Math.ceil(n.detectionThreshold)}}number_of_increments=Math.ceil(number_of_increments);if((number_of_increments*increment_value)<6){number_of_increments=6}if((number_of_increments*increment_value)>10){number_of_increments=10}probes=probes;line_groups=line_groups;probe_count=probe_count;title="Line Graph";subtitle1=n.Title;subtitle2=n.cellsSamplesAssayed;target=d;width=data.length*1;horizontal_grid_lines=width;if(width<1000){width=1000}var a={multi_group:o,colour_array:g,probe_name_for_tooltip:c,tip_decoy:tip,legend_text:"yes",legend_shorten_text:"no",substring_legend_length:15,days:days,day_count:day_count,ref_type:l,jitter:"no",test:"no",test_path:"/home/ariane/Documents/stemformatics/bio-js-box-plot/test/box_plot_test.csv",bar_graph:"yes",draw_scatter_on_box:scatter_needed,radius:3,sort_by_sample_id:"no",legend_padding:190,legend_rect_size:20,height:400,ref_name:f,legend_list:{name:"sample_id",list:line_group_array},line_group_colour_array:g,x_axis_list:unique_probes_sorted,legend_probe_tip:"none",legend_list:{name:"line_groups",list:line_group_array},x_axis_list:unique_probes_sorted,legend_probe_tip:"none",width:graph_box_width,margin:{top:250,left:130,bottom:300,right:250},initial_padding:10,x_axis_label_padding:10,text_size:"12px",increment:number_of_increments*increment_value,display:{hoverbars:"yes",error_bars:"yes",legend:"yes",horizontal_lines:"yes",vertical_lines:"yes",x_axis_labels:"yes",y_axis_title:"yes",horizontal_grid_lines:"yes"},probe_list:probes_types,circle_radius:4,hover_circle_radius:8,box_width:50,box_width_wiskers:5,sortByOption:"Day",show_min_y_axis:e,day_state_order:day_state_order,line_group_order:n.sampleTypeDisplayOrder,probe_order:unique_probes_sorted,include_day_x_axis:show_days,size_of_day_labels:200,x_axis_padding:50,background_colour:"white",background_stroke_colour:"black",background_stroke_width:"1px",colour:t,font_style:"Arial",grid_colour:"black",grid_opacity:1,y_label_text_size:"14px",y_label_x_val:60,data:data,domain_colours:["#FFFFFF","#7f3f98"],error_bar_width:5,error_stroke_width:"1px",error_dividor:100,horizontal_lines:[["Detection Threshold "+n.detectionThreshold,"green",n.detectionThreshold],["Median "+n.medianDatasetExpression,,n.medianDatasetExpression]],horizontal_line_value_column:"value",horizontal_grid_lines:width,legend_class:"legend",legend_range:[0,100],line_stroke_width:"2px",show_legend_tooltip:"yes",legend_toggle_opacity:"no",legend_text:"yes",sample_id_order:n.sampleTypeDisplayOrder,sample_id_list:sample_id_list,number_of_colours:39,padding:2,probe_count:probe_count,axis:"top",sample_id_count:sample_count,probes:probes,line_groups:line_groups,num_sample_types:line_group_count,subtitles:[subtitle1],stroke_width:"3px",stroke_width_for_line:"2px",stroke_width_num:3,target:target,title:k,title_class:"title",tip:tip,tooltip:tooltip,watermark:"http://www.stemformatics.org/img/logo.gif",x_axis_text_angle:-45,x_axis_title:"Line Groups",x_column:"Line_Group_ID",x_middle_title:500,y_axis_title:n.yAxisLabel,y_column:"Expression_Value"};var p=biojsvislinegraph(a);var q=d;var i=q.getElementsByTagName("svg")[0];var s=(new XMLSerializer).serializeToString(i)};