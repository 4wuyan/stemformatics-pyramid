var module={};function round_to_two_decimal_places(a){new_num=Math.round(a*100)/100;return new_num}var tip=d3.tip().attr("class","d3-tip").html(function(a){sample_type=a.sample_type;temp="Sample Type: "+sample_type+"<br/>";return temp});var tooltip=d3.tip().attr("class","d3-tip").offset([0,+110]).html(function(a){temp="Probe: "+a.Probe+"<br/>Sample Type: "+a.Sample_Type+"<br/>State: "+a.second_sort_by+"<br/>";return temp});function run_box_bar_gene_expression_graph(y,f,a,n,g,d,k,p,i,c,s,e,q){var t=n.split(",").length;max=0;min=0;number_of_increments=0;count=0;probes_types=new Array();probes=new Array();probe_count=0;sample_types=new Array();sample_type_array=new Array();var w=new Array();n=remove_spaces(n);var r=n.split(",");if(r[0]=="Sample_Type"||r[1]=="Sample_Type"){first_option="Sample_Type"}else{first_option=r[0]}sample_type_count=0;if(multiview_graph!="yes"){sample_type_hover={}}j=0;data.forEach(function(z){z.Expression_Value=+z.Expression_Value;z.Standard_Deviation=+z.Standard_Deviation;z.Probe=z.Probe;if(z.Expression_Value+z.Standard_Deviation>max){max=z.Expression_Value+z.Standard_Deviation}if(z.Expression_Value-z.Standard_Deviation<min){min=z.Expression_Value-z.Standard_Deviation}if($.inArray(z.Probe,probes_types)==-1){probes_types.push(z.Probe);probe_count++}if($.inArray(z.Sample_Type,sample_type_array)==-1){sample_type_array.push(z.Sample_Type);sample_types[z.Sample_Type]=sample_type_count;sample_type_hover[z.Sample_Type]=z.Sample_Type_Long;j++;sample_type_count++}if($.inArray(z[first_option],w)==-1){w.push(z[first_option])}count++});var l={};var h=39;l=y;if(first_option!="Sample_Type"){setup_colours_for_group(w.sort(sortAlphaNum_array),l,h,s.probeColours)}number_of_increments=max-min;max_y_val=max;if(number_of_increments<s.medianDatasetExpression){number_of_increments=Math.ceil(s.medianDatasetExpression)}else{if(number_of_increments<s.detectionThreshold){number_of_increments=Math.ceil(s.detectionThreshold)}}number_of_increments=Math.ceil(number_of_increments);if((number_of_increments*increment_value)<6){number_of_increments=6}if((number_of_increments*increment_value)>10){number_of_increments=10}probes=probes;sample_types=sample_types;probe_count=probe_count;title="Box Plot";subtitle1=s.Title;subtitle2=s.cellsSamplesAssayed;target=f;width=data.length*1;horizontal_grid_lines=width;if(width<1000){width=1000}var m=d3.tip().attr("class","d3-tip").offset([0,+110]).html(function(z){temp="Probe: "+z.Probe+"<br/>Sample: "+z.Sample_Type+"<br/>second_sort_by State: "+second_sort_by_names+"<br/>";return temp});if(graph_box_width==normal_graph_box_width){show_axis=="no"}if((probe_count*sample_type_count)>35&&show_axis=="no"){x_axis_labels_required="no"}else{x_axis_labels_required="yes"}sorted_sample_types=Object.keys(s.sampleTypeDisplayGroups).sort(function(A,z){return s.sampleTypeDisplayGroups[A]-s.sampleTypeDisplayGroups[z]});if((n.split(",")[0]=="Sample_Type"||n.split(",")[1]=="Sample_Type")){w=s.sampleTypeDisplayOrder.split(",");if((n.split(",").length==1)&&(n.split(",")[0]!="Sample_Type")){w=w.sort(sortAlphaNum_array)}}var b={mins:{stroke:1.5,radius:1.5,box_width:2},multi_group:t,legend_list:{name:first_option,list:w},colour_array:l,probe_name_for_tooltip:e,jitter:"no",test:"no",test_path:"/home/ariane/Documents/stemformatics/bio-js-box-plot/test/box_plot_test.csv",bar_graph:a,box_width:50,box_width_wiskers:15,second_sort_by_order:"no",sample_type_order:w.join(),probe_order:unique_probes_sorted,include_second_sort_by_x_axis:"no",size_of_second_sort_by_labels:200,x_axis_padding:50,all_second_sort_by_tooltip:m,draw_scatter_on_box:scatter_needed,ref_name:k,radius:3,legend_padding:190,legend_rect_size:20,whiskers_needed:i,height:400,width:graph_box_width,margin:{top:250,left:130,bottom:400,right:270},initial_padding:10,legend_on_x_axis:"no",axis:"top",x_axis_label_padding:10,text_size:"12px",title_text_size:"16px",sortByOption:n,show_min_y_axis:g,increment:number_of_increments*increment_value,display:{hoverbars:"yes",error_bars:"yes",legend:d,horizontal_lines:"yes",vertical_lines:"yes",x_axis_labels:x_axis_labels_required,y_axis_title:"yes",horizontal_grid_lines:"yes"},circle_radius:2,hover_circle_radius:10,background_colour:"white",background_stroke_colour:"black",background_stroke_width:"1px",ref_type:q,colour:y,font_style:"Arial",grid_colour:"black",grid_opacity:1,y_label_text_size:"14px",y_label_x_val:60,data:data,domain_colours:["#FFFFFF","#7f3f98"],error_bar_width:5,error_stroke_width:"1px",error_dividor:100,horizontal_lines:[["Detection Threshold "+s.detectionThreshold,"green",s.detectionThreshold],["Median "+s.medianDatasetExpression,,s.medianDatasetExpression]],horizontal_line_value_column:"value",horizontal_grid_lines:width,legend_class:"legend",legend_range:[0,100],line_stroke_width:"2px",legend_text:"yes",legend_shorten_text:"no",substring_legend_length:15,show_legend_tooltip:"no",legend_toggle_opacity:"no",number_of_colours:39,padding:2,probe_count:probe_count,probes:probes,sample_types:sample_types,num_sample_types:sample_type_count,subtitles:[subtitle1],stroke_width:"3px",stroke_width_num:3,target:target,title:p,title_class:"title",tip:tip,tooltip:tooltip,watermark:"http://www.stemformatics.org/img/logo.gif",x_axis_text_angle:-45,x_axis_title:"Samples",x_column:"Sample_ID",x_middle_title:500,y_axis_title:s.yAxisLabel,y_column:"Expression_Value"};var u=biojsvisboxplot(b);var v=f;var o=v.getElementsByTagName("svg")[0];var x=(new XMLSerializer).serializeToString(o)};