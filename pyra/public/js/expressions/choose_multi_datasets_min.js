function chosenDatasetTableClick(){$("#chosenDatasetTable input[type=checkbox]").click(function(){var a=$(this);var b=a.attr("id").split("delete")[1];$("#"+b).attr("checked",false);a.parents("tr").remove()})}function setup_chosenDatasetTable(b){var a=$("#"+b).parents("tr").html();if(a!=undefined){a="<tr>"+a.replace(b,"delete"+b)+"</tr>"}$("#table_chosen_none_row").hide();$("#chosenDatasetTable tr:last").after(a);$("#"+b).attr("checked",true)}$(document).ready(function(){var a=$("#loaded_datasets").html();var b=jQuery.parseJSON(a);for(var d in b){var c=b[d];setup_chosenDatasetTable(c)}chosenDatasetTableClick();$("#chooseDatasetTable").dataTable({bPaginate:false,bLengthChange:false,bFilter:true,bSort:true,bInfo:false,aaSorting:[[1,"asc"]],bAutoWidth:false});$("#chooseDatasetTable input[type=checkbox]").click(function(){var e=$(this);var g=e.attr("id");var f=e.attr("checked");if(f){setup_chosenDatasetTable(g);chosenDatasetTableClick()}else{$("#delete"+g).parents("tr").remove()}});$("input.save").click(function(){base_url=$("#base_url").attr("href");datasets="";d=0;$("#chosenDatasetTable input").each(function(f,g){if(!!document.documentMode){c=$(this).attr("id").split("delete")[0]}else{c=$(this).attr("id").split("delete")[1]}datasets=datasets+","+c;d++});if(d>=2&&d<=9){datasets=datasets.slice(1);var e=base_url+"&datasets="+datasets;window.location=e}else{error_title="Error when choosing multiple datasets";$("#wb_modal_title").html(error_title);error_html="Must choose between 2 and 9 datasets";$("#wb_modal_content").html(error_html);$("#modal_div").modal()}})});